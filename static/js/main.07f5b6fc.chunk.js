(this["webpackJsonphatohub-export-data"]=this["webpackJsonphatohub-export-data"]||[]).push([[0],{155:function(e){e.exports=JSON.parse('{"name":"hatohub-export-data","version":"1.2.1","private":true,"homepage":"https://ratchagarn.github.io/hatohub-export-data/","dependencies":{"@ant-design/icons":"^4.2.2","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","antd":"^4.7.0","dayjs":"^1.9.3","husky":"^4.3.0","lint-staged":"^10.4.2","lodash":"^4.17.20","prettier":"^2.1.2","prop-types":"^15.7.2","react":"^16.14.0","react-csv-downloader":"^2.1.0","react-csv-reader":"^3.1.1","react-dom":"^16.14.0","react-scripts":"3.4.3","styled-components":"^5.2.0"},"scripts":{"start":"PORT=4200 react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","analyze":"source-map-explorer \'build/static/js/*.js\'","deploy":"yarn build && gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"husky":{"hooks":{"pre-commit":"lint-staged"}},"lint-staged":{"src/**/*.{js,jsx,ts,tsx,json,css,scss,md}":["prettier --write"]},"devDependencies":{"gh-pages":"^3.1.0"}}')},179:function(e,t,n){e.exports=n(329)},298:function(e,t,n){},329:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(32),c=n.n(o),l=n(40),i=n(63),u=n(41),s=n(330),p=n(331),m=n(64),d=n(334),f=n(332),h=n(335),g=n(338),v=n(339),E=n(143),b=n.n(E),y=n(144),x=n.n(y),j=n(336);function O(){var e=Object(l.a)(["\n  margin-left: 8px;\n"]);return O=function(){return e},e}var w=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(j.a,null),r.a.createElement(k,null,"Loading..."))},k=u.a.span(O()),$=n(88),A=n(333),I=n(337),z=n(147),Z=n.n(z),S=n(148),B=n.n(S);var C={foodPandaExtrackLineItem:function(e){if("string"!==typeof e[0].Order_ID||"string"!==typeof e[0].Items)return{error:{message:'Missing field "Order ID" and "Items"'}};var t=0,n=e.map((function(e){return e.Items})).filter((function(e){return null!=e})).map((function(t,n){var a,o=B()(e[n],"Order_ID"),c=/\[.*\]/.test(t)?"], ":",",l=[];return t.split(c).forEach((function(e){a=e.trim(),/\[/.test(a)&&!/\]/.test(a)?a+="]":!/\[/.test(a)&&/,/.test(e)&&(a=a.split(",").map((function(e){return e.trim()}))),Array.isArray(a)?a.forEach((function(e){return l.push(e)})):l.push(a)})),{rawData:t,lineItems:r(l,o)}})),a=[];return n.forEach((function(e){e.lineItems.forEach((function(e){return a.push(e)}))})),{error:null,result:a};function r(e,n){return e.map((function(e){var a=e.match(/^([0-9]+)/),r=e.match(/^[0-9]+\s+([A-Z]{2})/),o=e.match(/^[0-9]+\s+[A-Z]{2}\s+(.+)\s+\[.+\]|^[0-9]+\s+[A-Z]{2}\s+(.+)$/),c=e.match(/\[(.+)\]/);return{_id:t+=1,orderID:n,qty:a?Number(a[0]):"",store:r?r[1]:"",menu:o?o[1]?o[1]:o[2]:"",option:c?c[1]:""}}))}}};function D(e){if("string"!==typeof e)return e;var t=e.replace(/([a-z])([A-Z][a-z])/g,"$1 $2").replace(/([A-Z][a-z])([A-Z])/g,"$1 $2").replace(/([a-z])([A-Z]+[a-z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-z][a-z])/g,"$1 $2").replace(/([a-z]+)([A-Z0-9]+)/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-rt-z][a-z]*)/g,"$1 $2").replace(/([0-9])([A-Z][a-z]+)/g,"$1 $2").replace(/([A-Z]{2,})([0-9]{2,})/g,"$1 $2").replace(/([0-9]{2,})([A-Z]{2,})/g,"$1 $2").trim();return t.charAt(0).toUpperCase()+t.slice(1)}function P(){var e=Object(l.a)(["\n  td {\n    padding: 0;\n    height: 32px;\n\n    &:first-child {\n      padding-right: 8px;\n      font-weight: bold;\n    }\n  }\n"]);return P=function(){return e},e}function F(){var e=Object(l.a)(["\n  position: relative;\n  line-height: 32px;\n\n  > .csv-reader-input {\n    > input[type='file'] {\n      height: 32px;\n      display: none;\n    }\n  }\n"]);return F=function(){return e},e}var M=$.a.Option,_=Object.keys({foodPandaExtrackLineItem:"foodPandaExtrackLineItem"});function L(e){var t=e.onCompleted,n=Object(a.useState)(),o=Object(i.a)(n,2),c=o[0],l=o[1],u=Object(a.useState)(),d=Object(i.a)(u,2),f=d[0],h=d[1],g=Object(a.useRef)();return r.a.createElement(A.a,{layout:"vertical"},r.a.createElement(T,null,r.a.createElement(Z.a,{inputId:"react-csv-reader-input",onFileLoaded:function(e,n){var a=C[c];if("function"!==typeof a)return;h(n);var r=e[0],o=e.slice(1).map((function(e){var t={};return e.forEach((function(e,n){t[r[n].replace(/\s/g,"_")]=e})),t}));t(a(o),c)}}),f?r.a.createElement(J,null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name:"),r.a.createElement("td",null,f.name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Size:"),r.a.createElement("td",null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,a=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(a))+" "+r[o]}(f.size))))):r.a.createElement(s.a,{type:"flex",gutter:16},r.a.createElement(p.a,null,r.a.createElement(A.a.Item,{noStyle:!0},r.a.createElement($.a,{placeholder:"Select service",style:{width:300},onChange:function(e){return l(e)}},_.map((function(e){return r.a.createElement(M,{key:e},D(e))}))))),r.a.createElement(p.a,null,r.a.createElement(A.a.Item,{noStyle:!0},r.a.createElement(m.a,{disabled:!c,icon:r.a.createElement(I.a,null),onClick:function(){g.current||(g.current=document.getElementById("react-csv-reader-input"));g.current.click()}},"Upload CSV"))))))}L.defaultProps={brand:"foodPanda",onCompleted:function(){}};var N=L,T=u.a.div(F()),J=u.a.table(P()),U=(n(298),n(155));function V(){var e=Object(l.a)(["\n  position: relative;\n  top: -4px;\n  margin-left: 12px;\n"]);return V=function(){return e},e}function K(){var e=Object(l.a)(["\n  > * {\n    display: inline-block;\n    outline: none;\n    user-select: none;\n\n    > a {\n      &:hover {\n        text-decoration: none;\n      }\n    }\n  }\n"]);return K=function(){return e},e}function R(){var e=Object(l.a)(["\n  margin-bottom: 32px;\n"]);return R=function(){return e},e}function W(){var e=Object(l.a)(["\n  padding: 24px;\n"]);return W=function(){return e},e}function q(){var e=Object(l.a)(["\n  margin-top: 32px;\n  font-size: 20px;\n"]);return q=function(){return e},e}function G(){var e=Object(l.a)(["\n  margin-bottom: 32px;\n  padding-bottom: 8px;\n  border-bottom: 2px solid black;\n  font-size: 24px;\n"]);return G=function(){return e},e}var H=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(),l=Object(i.a)(c,2),u=l[0],h=l[1],E=Object(a.useState)(),y=Object(i.a)(E,2),j=y[0],O=y[1];return Object(a.useEffect)((function(){var e;return n&&(e=setTimeout((function(){o(!1),h(void 0),O(void 0)}),500)),function(){return clearTimeout(e)}}),[n]),r.a.createElement(X,null,r.a.createElement(Y,null,"Hatohub Export Data",r.a.createElement(ne,null,"v",U.version)),n?r.a.createElement(w,null):r.a.createElement(a.Fragment,null,r.a.createElement(s.a,{type:"flex",gutter:32},r.a.createElement(p.a,null,r.a.createElement(N,{onCompleted:function(e,t){var n=e.result,a=e.error;a?h(a.message):(h(void 0),O(n))}})),(u||j)&&r.a.createElement(p.a,null,r.a.createElement(m.a,{type:"dashed",icon:r.a.createElement(g.a,null),onClick:function(){o(!0)}},"Upload New file")),j&&r.a.createElement(p.a,null,r.a.createElement(te,null,r.a.createElement(b.a,{filename:x()().format(),separator:",",wrapColumnChar:'"',datas:j,columns:function(e){if(!e)return;return Object.keys(e).slice(1).map((function(e){return{id:e,displayName:D(e)}}))}(j[0]),text:"Download CSV"},r.a.createElement(m.a,{type:"primary",icon:r.a.createElement(v.a,null)},"Download CSV"))))),r.a.createElement(ee,null),u&&r.a.createElement(d.a,{type:"error",message:u}),j&&r.a.createElement(a.Fragment,null,r.a.createElement(Q,null,"Output Preview"),r.a.createElement(f.a,{rowKey:"_id",dataSource:j,columns:function(e){if(!e)return;return Object.keys(e).slice(1).map((function(e){return{title:D(e),dataIndex:e,key:e}}))}(j[0]),bordered:!0}))))},Y=u.a.h1(G()),Q=u.a.h3(q()),X=u.a.div(W()),ee=u.a.div(R()),te=u.a.div(K()),ne=Object(u.a)(h.a).attrs({color:"blue"})(V());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[179,1,2]]]);
//# sourceMappingURL=main.07f5b6fc.chunk.js.map